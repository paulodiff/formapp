<div class="container">
    <div class="alert alert-info" role="alert">
     <h4>PROTOCOLLO</h4>
     <p>Compilare i campi sottostanti per l'inoltro di una istanza generica/p>
     <p>Istruzioni per la compilare .... </p>
    </div>
    
    <div>
    

       <!-- create our form -->
    <form name="vm.userForm">

<div class="panel panel-success">
  <div class="panel-heading">Dati anagrafici</div>
  <div class="panel-body">


      <div class="row-fluid">

          <div class="col-md-6">

        <!-- nome field -->
        <div class="form-group">
            <label>Nome</label>
            <input  type="text" 
                    class="form-control" 
                    name="nomeRichiedente" 
                    ng-model="vm.model.nomeRichiedente"
                    ng-minlength="1"
                    ng-maxlength="100"
                    required>
                
            <div ng-messages="vm.userForm.nomeRichiedente.$error" style="color:maroon" role="alert">
                <div ng-message="required"  class="label label-danger">Campo richiesto</div>
                <div ng-message="minlength" class="label label-danger">Valore troppo corto</div>
                <div ng-message="maxlength" class="label label-danger">Valore troppo lungo</div>
            </div>
        </div>

        </div>

        <div class="col-md-6">


        <!-- email field -->
        <div class="form-group">
            <label>Cognome</label>
            <input type="text" 
                name="cognomeRichiedente" class="form-control" 
                ng-model="vm.model.cognomeRichiedente"
                ng-minlength="1"
                ng-maxlength="100"
                required>
                
            <div ng-messages="vm.userForm.cognomeRichiedente.$error" style="color:maroon" role="alert">
                <div ng-message="required"  class="label label-danger">Campo richiesto</div>
                <div ng-message="minlength" class="label label-danger">Valore troppo corto</div>
                <div ng-message="maxlength" class="label label-danger">Valore troppo lungo</div>
            </div>
            <!-- ngMessages goes here -->

        </div>

    </div>

</div>  <!-- row -->


      <div class="row-fluid">

          <div class="col-md-6">

        <!-- nome field -->
        <div class="form-group">
            <label>Codice Fiscale</label>
            <input  type="text" 
                    class="form-control" 
                    name="codiceFiscaleRichiedente" 
                    ng-model="vm.model.codiceFiscaleRichiedente"
                    ng-minlength="1"
                    ng-maxlength="100"
                    required>
                
            <div ng-messages="vm.userForm.nomeRichiedente.$error" style="color:maroon" role="alert">
                <div ng-message="required"  class="label label-danger">Campo richiesto</div>
                <div ng-message="minlength" class="label label-danger">Valore troppo corto</div>
                <div ng-message="maxlength" class="label label-danger">Valore troppo lungo</div>
            </div>
        </div>

        </div>

        <div class="col-md-6">


        <!-- email field -->
        <div class="form-group">
            <label>Cellulare</label>
            <input type="text" 
                name="cognomeRichiedente" class="form-control" 
                ng-model="vm.model.cellulareRichiedente"
                ng-minlength="1"
                ng-maxlength="100"
                required>
                
            <div ng-messages="vm.userForm.cognomeRichiedente.$error" style="color:maroon" role="alert">
                <div ng-message="required"  class="label label-danger">Campo richiesto</div>
                <div ng-message="minlength" class="label label-danger">Valore troppo corto</div>
                <div ng-message="maxlength" class="label label-danger">Valore troppo lungo</div>
            </div>
            <!-- ngMessages goes here -->

        </div>

    </div>

</div>  <!-- row -->


<!--
<div class="panel panel-success">
  <div class="panel-heading">Dettaglio dell' istanza</div>
  <div class="panel-body">
        <div class="form-group">
            <label>Descrizione</label>
            <input  type="text" 
                    class="form-control" 
                    name="descrizione" 
                    ng-model="vm.model.descrizione"
                    ng-minlength="10"
                    ng-maxlength="200"
                    required>
                
            <div ng-messages="vm.userForm.descrizione.$error" style="color:maroon" role="alert">
                <div ng-message="required" class="label label-danger">Descrizione obbligatoria</div>
                <div ng-message="minlength" class="label label-danger">Descrizione field is too short</div>
                <div ng-message="maxlength" class="label label-danger">Descrizione field is too long</div>
            </div>
        </div>
        
    </div>
    </div>
-->

<!-- BLOCCO INDIRIZZO ------------------------------------------------------------------------ -->


    <div class="row-fluid">
          <div class="col-md-6">
                <div class="form-group">
                    <label>Indirizzo</label>
                    <input  name="indirizzo" 
                            type="text" 
                            class="form-control" 
                            required 
                            ng-model="vm.model.indirizzoRichiedente" 
                            placeholder="password">
                    <div ng-messages="vm.userForm.password.$error" style="color:maroon" role="alert">
                        <div ng-message="required"  class="label label-danger">Campo richiesto</div>
                        <div ng-message="minlength" class="label label-danger">Valore troppo corto</div>
                        <div ng-message="maxlength" class="label label-danger">Valore troppo lungo</div>
                        <div ng-message="email" class="label label-danger">MMValore troppo lungo</div>
                    </div>
              </div>
          </div>

          <div class="col-md-3">
                <div class="form-group">
                    <label>Citt√†</label>

                    <input  name="confirm_password" 
                            type="email" 
                            class="form-control" 
                            required 
                            ng-model="vm.model.cittaRichiedente" 
                            ui-validate=" '$value==vm.model.cittaRichiedente' "
                            ui-validate-watch=" 'vm.model.cittaRichiedente' " 
                            placeholder="conferma password">
         
                <div ng-messages="vm.userForm.confirm_password.$error" style="color:maroon" role="alert">
                        <div ng-message="required"  class="label label-danger">Campo richiesto</div>
                        <div ng-message="minlength" class="label label-danger">Valore troppo corto</div>
                        <div ng-message="email" class="label label-danger">MMMMMNO MATCH</div>
                        <div ng-message="validator" class="label label-danger">NO MATCH</div>
                </div>
            </div>
        </div>

          <div class="col-md-3">
                <div class="form-group">
                    <label>CAP</label>

                    <input  name="cap" 
                            type="email" 
                            class="form-control" 
                            required 
                            ng-model="vm.model.capRichiedente" 
                            ui-validate=" '$value==vm.model.capRichiedente' "
                            ui-validate-watch=" 'vm.model.capRichiedente' " 
                            placeholder="conferma password">
         
                <div ng-messages="vm.userForm.confirm_password.$error" style="color:maroon" role="alert">
                        <div ng-message="required"  class="label label-danger">Campo richiesto</div>
                        <div ng-message="minlength" class="label label-danger">Valore troppo corto</div>
                        <div ng-message="email" class="label label-danger">MMMMMNO MATCH</div>
                        <div ng-message="validator" class="label label-danger">NO MATCH</div>
                </div>
            </div>
        </div>
  </div>


<!-- BLOCCO EMAIL COMUNICAZIONI --------------------------------------------------------------------- -->


    <div class="row-fluid">
          <div class="col-md-6">
                <div class="form-group">
                    <label>Email (per le comunicazioni)</label>
                    <input  name="password" 
                            type="email" 
                            class="form-control" 
                            required 
                            ng-model="vm.model.emailRichiedente" 
                            placeholder="password">
                    <div ng-messages="vm.userForm.password.$error" style="color:maroon" role="alert">
                        <div ng-message="required"  class="label label-danger">Campo richiesto</div>
                        <div ng-message="minlength" class="label label-danger">Valore troppo corto</div>
                        <div ng-message="maxlength" class="label label-danger">Valore troppo lungo</div>
                        <div ng-message="email" class="label label-danger">MMValore troppo lungo</div>
                    </div>
              </div>
          </div>

          <div class="col-md-6">
                <div class="form-group">
                    <label>Email di conferma</label>

                    <input  name="confirm_password" 
                            type="email" 
                            class="form-control" 
                            required 
                            ng-model="vm.model.emailRichiedenteConferma" 
                            ui-validate=" '$value==vm.model.emailRichiedente' "
                            ui-validate-watch=" 'vm.model.emailRichiedente' " 
                            placeholder="conferma password">
         
                <div ng-messages="vm.userForm.confirm_password.$error" style="color:maroon" role="alert">
                        <div ng-message="required"  class="label label-danger">Campo richiesto</div>
                        <div ng-message="minlength" class="label label-danger">Valore troppo corto</div>
                        <div ng-message="email" class="label label-danger">MMMMMNO MATCH</div>
                        <div ng-message="validator" class="label label-danger">NO MATCH</div>
                </div>
            </div>
        </div>
  </div>

  </div>
</div>

<div class="panel panel-yellow">
  <div class="panel-heading">Allegati</div>
  <div class="panel-body">
    


   <div class="form-group">
     <label>Allegato n.1 - 20M max</label>
      <input    class="btn btn-success btn-block"
                type="file" 
                ngf-select 
                ng-model="vm.model.picFile1" 
                name="file1"    
                accept="image/*" 
                ngf-max-size="20MB" 
                required
                ngf-change="vm.calcHash($file)"
                ngf-model-invalid="errorFile">

      <span class="label label-danger" ng-show="vm.userForm.file1.$error.required">Allegato obbligatorio</span>
      <span class="label label-danger" ng-show="vm.userForm.file1.$error.maxSize" class="badge">File troppo grande 
          {{errorFile.size / 1000000|number:1}}MB: max 2M</span>
   </div>

<!--
   <div class="form-group">
     <label>Allegato n.2 - Illimitato</label>
      <input    
                class="btn btn-success btn-block"
                type="file" 
                ngf-select 
                ng-model="vm.model.picFile2" 
                name="file2"    
                accept="*/*" 
                required
                ngf-change="vm.calcHash($file)"
                ngf-model-invalid="errorFile">
   <span class="label label-danger" ng-show="vm.userForm.file2.$error.required" class="btn-danger">Allegato obbligatorio</span>
   <span class="label label-danger" ng-show="vm.userForm.file2.$error.maxSize" class="btn-danger">File too large {{errorFile.size / 1000000|number:1}}MB: max 2M</span>
   </div>
-->

  </div>
</div>

<!--

<div class="panel panel-green">
  <div class="panel-heading">Codice Sicurezza Antifrode</div>
  <div class="panel-body">

  <div class="form-group">
    <div    vc-recaptcha   
            ng-model="vm.model.RecaptchaResponse"
            key="'6Ldg6AwUAAAAAPgKoqezNrIVEsmdm7uafTop0r84'"></div>
  </div>
</div>
</div>

-->

        <div class="form-group">
            <button type="submit"
                    ng-disabled="!vm.userForm.$valid" 
                    class="btn btn-primary btn-block"  
                    ng-click="vm.onSubmit()">Invia richiesta</button>
        </div>
    </div>
        
    </form>

    <pre>vm.userForm.$valid = {{ vm.userForm.$valid | json }}</pre>
    <pre>vm.userForm.name.$error = {{ vm.userForm.name.$error | json }}</pre>
    <pre>vm.userForm.name.$touched = {{ vm.userForm.name.$touched | json }}</pre>
    <pre>vm.userForm = {{ vm.userForm| json }}</pre>
    <pre>vm.model.picFile1 = {{ vm.model.picFile1 }}</pre>
    
    
      
      <p>Form Data</p>
      <pre>{{vm.model | json}}</pre>
      <p>Form Error</p>
      <pre>{{vm.errors | json}}</pre>
    </div>
    <p>reCaptcha - http://vividcortex.github.io/angular-recaptcha/ </p>
    <p>hashMe.js - https://github.com/marcu87/hashme </p>
    <p>ng-file-upload - https://github.com/danialfarid/ng-file-upload </p>
    <p>csrf - https://www.theodo.fr/blog/2015/04/preventing-csrf-attacks-with-express-and-angularjs/ </p>
    <p>Serve static files in route - http://stackoverflow.com/questions/11569181/serve-static-files-on-a-dynamic-route-using-express </p>
    <p>CSS Input Style - http://tympanus.net/codrops/2015/09/15/styling-customizing-file-inputs-smart-way/</p>
    <p>Double Mail - http://stackoverflow.com/questions/22173016/comparing-two-input-values-in-a-form-validation-with-angularjs</p>
    <p>UI-Validate - https://github.com/angular-ui/ui-validate </p>
    <div>
        <p>Output</p>
        <pre>{{outputStatusCode}}</pre>
        <pre>{{outputResponse}}</pre>
    </div>
</div>      
